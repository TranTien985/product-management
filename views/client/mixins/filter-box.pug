mixin product-filters(level1Data, level2Data, queryParams = {})
  //- Hàm kiểm tra xem value có nằm trong queryParams không
  -
    const isChecked = (name, value) => {
      if (!queryParams[name]) return false;
      if (Array.isArray(queryParams[name])) return queryParams[name].includes(value);
      return queryParams[name] === value;
    }

  //- --- KHỐI LỌC 1: DANH MỤC ---
  .filter-box.filter-category
    .filter-header
      h3.filter-title Danh mục sản phẩm
      span.filter-toggle -
    .filter-content
      ul.category-list
        each item in level1Data
          li
            label
              input(
                type="checkbox"
                name="category"
                value=item.slug
                checked=isChecked('category', item.slug)
              )
              span= item.title

  //- --- KHỐI LỌC 2: GIÁ BÁN ---
  .filter-box.filter-price
    .filter-header
      h3.filter-title Giá bán
      span.filter-toggle -
    .filter-content
      ul.price-list
        -
          const prices = [
            { v: 'str-0-200000', l: '0đ - 200.000đ' },
            { v: 'str-200000-500000', l: '200.000đ - 500.000đ' },
            { v: 'str-500000-1000000', l: '500.000đ - 1.000.000đ' },
            { v: 'str-1000000-2000000', l: '1.000.000đ - 2.000.000đ' }
          ]

        //- Vòng lặp
        each price in prices
          li
            label
              input(
                type="checkbox" 
                name="price" 
                value=price.v
                checked=isChecked('price', price.v)
              )
              span= price.l

  //- --- KHỐI LỌC 3: THƯƠNG HIỆU ---
  .filter-box.filter-brand
    .filter-header
      h3.filter-title Thương hiệu
      span.filter-toggle -
    .filter-content
      ul.brand-list
        each item in level2Data
          li
            label
              input(
                type="checkbox"
                name="category"
                value=item.slug
                checked=isChecked('category', item.slug)
              )
              span= item.title